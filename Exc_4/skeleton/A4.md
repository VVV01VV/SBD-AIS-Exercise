
## Software Architecture for Big Data — Exercise 4

### Docker Compose Integration

In this exercise, the goal was to **containerize both the PostgreSQL database and the Go HTTP service** using **Docker Compose**.
This allows both services to run together easily with a shared network, persistent storage, and environment variables.

---

## Setup Overview

### Files Created

* **`docker-compose.yml`** – defines both the database (`db`) and the Go service (`orderservice`)
* **`debug.env`** – stores environment variables for database configuration
* **`Dockerfile`** – builds the Go service into a lightweight runtime container

### Environment Variables (`debug.env`)

```
POSTGRES_DB=order
POSTGRES_USER=docker
POSTGRES_PASSWORD=docker
POSTGRES_TCP_PORT=5432
DB_HOST=db
```

> Note: `DB_HOST=db` refers to the PostgreSQL container name in the Compose network.

---

## How to Run the System

1. Open a terminal and navigate to the project folder:

   ```bash
   cd "D:\Big Data Class\SBD-AIS-Exercise\Exc_4\skeleton"
   ```

2. Start both containers (database + service):

   ```bash
   docker compose up --build
   ```

   This command:

   * Builds the Go application image (using the Dockerfile)
   * Starts PostgreSQL (with a persistent volume)
   * Connects both containers via an internal Docker network

3. Once running, open in your browser:

   * **Swagger UI:** [http://localhost:3000/openapi/index.html](http://localhost:3000/openapi/index.html)
   * **API Root:** [http://localhost:3000/](http://localhost:3000/)

---

## How It Works

* Docker Compose automatically creates a shared network, allowing `orderservice` to connect to `db` using the hostname `db`.
* Data is persisted using a named Docker volume (`pg18data`).
* The application is rebuilt automatically each time `docker compose up --build` is run.

---

## Teardown

To stop the services:

```bash
docker compose down
```

To remove all containers **and data**:

```bash
docker compose down -v
```

---

**Result:**
Both the PostgreSQL database and the Go `ordersystem` service are successfully containerized, networked, and run together via Docker Compose.
The API and Swagger UI are accessible at `localhost:3000`, and database persistence is maintained automatically.
